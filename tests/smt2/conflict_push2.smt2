(declare-sort S)
(declare-const a S)
(declare-const b S)
(declare-fun f (S) Bool)
(assert (f a))
(assert (not (f b)))
(push)
(assert (= a b))
(push)
(declare-sort ShouldGetPopped)
(declare-const c ShouldGetPopped)
(declare-fun g (S) ShouldGetPopped)
(assert (= (g a) c))
(pop)
(declare-const c S)
(declare-fun g (S) Bool)
(assert (= a c))
(assert (g a))
(assert (= (g b) (g c)))
(check-sat)
(pop)